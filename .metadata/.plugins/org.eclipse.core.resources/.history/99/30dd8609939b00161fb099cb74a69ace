package juego;

import tanques.*;

import java.awt.event.*;

import javax.swing.JLabel;

import mapa.*;

public class Juego {
	
	private Jugador jugador;
	private Enemigo[] enemigos;
	private Mapa mapa;
	private GUI gui;
	
	public Juego (GUI gui){
		
		this.gui = gui;
		
		mapa = new Mapa();
		
		for(int i = 0; i<mapa.nroFilas();i++)
			for(int j = 0; j<mapa.nroColumnas(); j++){
				if(mapa.getObjeto(i, j, 1)!=null){
					JLabel grafico = mapa.getObjeto(i, j, 1).getGrafico();
					gui.add(grafico);
				}
			}
		
		enemigos = new Enemigo[4];
		for(int i=0; i<4; i++)
			enemigos[i]=null;
		
		
		agregarJugador();
		agregarEnemigos();
		
		
	}
	
	public void mover(int dir){
		
		int direccion = 0;
		switch (dir){
			case KeyEvent.VK_UP : //Arriba
				direccion = 0;
				break;
			case KeyEvent.VK_LEFT : //Izquierda
				direccion = 2;
				break;
			case KeyEvent.VK_DOWN : //Abajo
				direccion = 1;
				break;	
			case KeyEvent.VK_RIGHT : //Derecha
				direccion = 3;
				break;
				
			case KeyEvent.VK_SPACE : //disparo
				direccion = 4;
				break;
		}
		
		jugador.moverLogico(direccion);
	}
	
	public void agregarJugador(){
		jugador = new Jugador(mapa.getCelda(2, 2),2,2);
		mapa.setObjeto(jugador, 2, 2, 0);
		gui.add(jugador.getGrafico());
	}
	
	public void agregarEnemigos(){
		enemigos[0]= new Enemigo(mapa.getCelda(1, 1),1,1);
		mapa.setObjeto(enemigos[0], 1, 1,0);
		gui.add(enemigos[0].getGrafico());
		enemigos[1] = new Enemigo(mapa.getCelda(1, 2),1,2);
		mapa.setObjeto(enemigos[1],1 , 2,0);
		gui.add(enemigos[1].getGrafico());
	}
	
	
	

}
